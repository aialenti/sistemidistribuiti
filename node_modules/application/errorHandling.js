/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

// L'invio sul client dovrà essere realizzato tramite long polling e socketio
var handleQueryError = function(e){
  var message = e.message;
  var code = e.code;
  console.log(message);
  switch(code){
    case "ER_NO_REFERENCED_ROW_":
      if(message.match(/FOREIGN KEY \(\`home\_team\`\)/))
        console.log("Squadra in casa non esistente");
      if(message.match(/FOREIGN KEY \(\`away\_team\`\)/))
        console.log("Squadra fuori casa non esistente");
      if(message.match(/FOREIGN KEY \(\`matchdays\_flag\`\, \`matchdays\_number\`\, \`matchdays\_season\`\)/)) //giornata non esistente
        console.log("Giornata non esistente");
      if(message.match(/ FOREIGN KEY \(\`match\_id\`\)/))
        console.log("Match non esistente");
      break;
    case "ER_DUP_ENTRY":
      console.log("Entry duplicata");
      break;
    case "ECONNREFUSED":
      console.log("Errore del server SQL (impossibile connettersi)");
      break;
    case "ER_NO_SUCH_TABLE":
      console.log("Si sta' tentando di modificare una tabella inesistente (Errore database)");
      break;
    case "no_affected_rows":
      console.log("Il database non è stato modificato a causa di un errore")
    default:
      break;
  }
}

exports.handleQueryError = handleQueryError;