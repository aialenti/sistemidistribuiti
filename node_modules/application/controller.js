/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

var model = require('./model.js');
var crypto = require('./libs/md5.js');
require('../ember');

//Esempio di utilizzo della classe model

//dati necessari alla query
var data = new Object;
data.select = ["username","password"]; //campi da selezionare
data.from = "users"; //tabella dalla quale selezionare (non supporta join perch√© non necessari
data.where = [
  [
  "username", //campo della tabella
  "=",        //relazione
  "andrea"    //valore
  ]
  ];

//searchQuery compone la stringa query
var query = model.searchQuery(data);

//callback da eseguire dopo la query
callback = function(rows){
  console.log(rows);
}

//esecuzione della query
model.executeQuery(query,callback);

//query di ricerca dell'italia nelle countries'
var c = new Object
c.select = ['id'];
c.from = "countries";
c.where = [["name","=","italy"]];
country = model.searchQuery(c);

//campi per l'inserimento'
data.fields = ["username","countries_id","email","password"];
data.values = ["ettore",country,escape("andrea.ettore@gmail.com"),crypto.hexMd5("password")];
data.tableName = "users";

query = model.insertQuery(data); //creazione della query
//model.executeQuery(query,callback); //esecuzione

var getIndex = function(req,res){
  
  
  console.log("dkjbsakdsa")
  res.render('index', { title: 'Express' });
  
}
exports.getIndex = getIndex;